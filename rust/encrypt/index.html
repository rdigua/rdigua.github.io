<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head>
  <link href="//gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="generator" content="Hugo 0.59.0-DEV" />

  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title> &middot; Jay Blog</title>

  
  <link type="text/css" rel="stylesheet" href="http://blog.jaytogo.com/css/print.css" media="print">
  <link type="text/css" rel="stylesheet" href="http://blog.jaytogo.com/css/poole.css">
  <link type="text/css" rel="stylesheet" href="http://blog.jaytogo.com/css/syntax.css">
  <link type="text/css" rel="stylesheet" href="http://blog.jaytogo.com/css/hyde.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Abril+Fatface|PT+Sans:400,400i,700">


  
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/apple-touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="/favicon.png">

  
  
</head>

  <body class=" ">
  <aside class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      <a href="http://blog.jaytogo.com/"><h1>Jay Blog</h1></a>
      <p class="lead">
       learning rust, reviwe c, erp, javascript, blog, python 
      </p>
    </div>

    <nav>
      <ul class="sidebar-nav">
        <li><a href="http://blog.jaytogo.com/">Home</a> </li>
        <li><a href="/rust/"> rust </a></li>
      </ul>
    </nav>

    <p>&copy; 2019. All rights reserved. </p>
  </div>
</aside>

    <main class="content container">
    <div class="post">
  <h1></h1>
  <time datetime=0001-01-01T00:00:00Z class="post-date">Mon, Jan 1, 0001</time>
  

<h1 id="ç”¨-mkcert-æ­å»ºæœ¬åœ°å¼€å‘å—ä¿¡-https-è¯ä¹¦ç¯å¢ƒ">ç”¨ mkcert æ­å»ºæœ¬åœ°å¼€å‘å—ä¿¡ HTTPS è¯ä¹¦ç¯å¢ƒ</h1>

<h2 id="å‰è¨€">å‰è¨€</h2>

<p>åœ¨<a href="https://letsencrypt.org/">Let&rsquo;s Encrypt</a>æ¨å‡ºå…è´¹è¯ä¹¦ä»¥åï¼Œè¶Šæ¥è¶Šå¤šçš„ç½‘ç«™éƒ½ç”¨ä¸Šäº†å…è´¹çš„è¯ä¹¦ï¼ŒHTTPSç½‘ç«™å·²ç„¶æˆä¸ºäº†æ ‡é…ã€‚</p>

<p>æˆ‘åšå®¢çš„å‡ºç°æ—¶æœºè·Ÿ Let&rsquo;s Encrypt å·®ä¸å¤šï¼Œå½“æ—¶è‡ªå·±ä¸çŸ¥é“æ€ä¹ˆå®‰å…¨ä¼ è¾“ç™»å½•å¯†é’¥ï¼Œäºæ˜¯ç›´æ¥å°±ä¸æ”¯æŒHTTPï¼Œä»…æ”¯æŒHTTPSã€‚</p>

<p>è¿™æ ·ä¸€æ¥ï¼Œå°±ç®—åœ¨æœ¬åœ°ï¼Œä¹Ÿéœ€è¦å¯ç”¨HTTPSï¼Œä½†è¿™äº›è¯ä¹¦ä»¥å¾€å¤šæ•°æ˜¯æ‰‹åŠ¨è°ƒç”¨ OpenSSL ç”Ÿæˆè‡ªç­¾çš„è¯ä¹¦ï¼Œç„¶åæ·»åŠ åˆ°æµè§ˆå™¨çš„å—ä¿¡è¯ä¹¦åˆ—è¡¨ï¼Œå¾ˆéº»çƒ¦ï¼Œä¸”ä¸æ–¹ä¾¿ä½¿ç”¨ã€‚</p>

<h2 id="mkcert">mkcert</h2>

<p>æœ€è¿‘å‘ç°äº†ä¸€æ¬¾ç”¨ Go å†™çš„å°å·¥å…·ï¼Œ<a href="https://github.com/FiloSottile/mkcert">mkcert</a>ï¼Œä½œè€…æ˜¯ Google å‘˜å·¥ã€‚å®ƒç”¨äºåœ¨æœ¬åœ°æ­å»ºå—ä¿¡è¯ä¹¦ç¯å¢ƒã€‚è¯•ç”¨äº†ä¸€ä¸‹ï¼Œéå¸¸ä¾¿æ·ã€‚</p>

<p>é¦–æ¬¡è¿è¡Œæ—¶ï¼Œå®ƒä¼šç”Ÿæˆä¸€ä¸ª<strong>æœ¬åœ°CA</strong>ï¼Œå³æœ¬åœ°å…¬è¯æœºæ„æ ¹è¯ä¹¦ï¼Œç„¶å<strong>æŠŠæ­¤CAæ·»åŠ åˆ°ç³»ç»Ÿå—ä¿¡åˆ—è¡¨</strong>ã€‚æœ€åï¼Œç”±æ­¤CAé¢å‘ï¼ˆç­¾åï¼‰æ–°çš„ä¸‹çº§è¯ä¹¦ç»™å„ç½‘ç«™ä½¿ç”¨ã€‚</p>

<h2 id="å®‰è£…">å®‰è£…</h2>

<h3 id="macos">macOS</h3>

<p>ä½¿ç”¨ HomeBrew è¿›è¡Œå®‰è£…ï¼š</p>

<pre><code class="language-bash">brew install mkcert
brew install nss # å¦‚æœä½¿ç”¨çš„æ˜¯ç«ç‹æµè§ˆå™¨éœ€è¦å®‰è£…è¿™ä¸ª

</code></pre>

<h3 id="linux">Linux</h3>

<p>ç›´æ¥åˆ°  <a href="https://github.com/FiloSottile/mkcert/releases">https://github.com/FiloSottile/mkcert/releases</a>  ä¸‹è½½é¢„ç¼–è¯‘çš„äºŒè¿›åˆ¶ã€‚</p>

<h3 id="windows">Windows</h3>

<p>æš‚æ—¶ä¸æ”¯æŒ ğŸ˜‚</p>

<h2 id="åˆ›å»ºè¯ä¹¦">åˆ›å»ºè¯ä¹¦</h2>

<p>é¦–æ¬¡è¿è¡Œæ—¶ï¼Œå…ˆç”Ÿæˆå¹¶å®‰è£…æ ¹è¯ä¹¦ï¼š</p>

<pre><code>$ mkcert ---install
Created a new local CA at &quot;/Users/tao/Library/Application Support/mkcert&quot; ğŸ’¥
The local CA is now installed in the system trust store! âš¡ï¸
The local CA is now installed in the Firefox trust store (requires restart)! ğŸ¦Š

</code></pre>

<p>ç„¶åå°±å¯ä»¥ç­¾åå•¦ï¼š</p>

<pre><code>$ mkcert localhost 127.0.0.1 taoblog.local phpmyadmin.local
Using the local CA at &quot;/Users/tao/Library/Application Support/mkcert&quot; âœ¨

Created a new certificate valid for the following names ğŸ“œ
 - &quot;localhost&quot;
 - &quot;127.0.0.1&quot;
 - &quot;taoblog.local&quot;
 - &quot;phpmyadmin.local&quot;

The certificate is at &quot;./localhost+3.pem&quot; and the key at &quot;./localhost+3-key.pem&quot; âœ…

</code></pre>

<p>è¯ä¹¦å·²ç»ç”Ÿæˆï¼š</p>

<pre><code>$ ls -l *.pem
-rw-------  1 tao  staff  1704 Jul  6 10:42 localhost+3-key.pem
-rw-r--r--  1 tao  staff  1480 Jul  6 10:42 localhost+3.pem

</code></pre>

<h2 id="ä½¿ç”¨è¯ä¹¦">ä½¿ç”¨è¯ä¹¦</h2>

<p>æˆ‘ä»…ä»¥ nginx ä¸ºä¾‹ã€‚</p>

<pre><code class="language-nginx">
server {
    listen          443 ssl http2; # å¯ç”¨HTTPS
    server_name     taoblog.local; # è¿™é‡Œæ˜¯åˆšæ‰çš„åŸŸå

    ## è¿™é‡Œç°è¡Œå°±æ˜¯å¡«å†™åˆšæ‰ç”Ÿæˆçš„è¯ä¹¦
    ## å¯ä»¥æ˜¯ç»å¯¹è·¯å¾„ï¼Œä¹Ÿå¯ä»¥æ˜¯nginxçš„é…ç½®æ–‡ä»¶ç›¸å¯¹è·¯å¾„
    ## æ³¨æ„ä¸è¦æŠŠå…¬é’¥ã€ç§é’¥å¼„æ··äº†ï¼Œå¸¦keyçš„æ˜¯ç§é’¥
    ssl_certificate         localhost+3.pem;
    ssl_certificate_key     localhost+3-key.pem;

    ...
}

</code></pre>

<h2 id="æŸ¥çœ‹æµè§ˆå™¨è¯ä¹¦">æŸ¥çœ‹æµè§ˆå™¨è¯ä¹¦</h2>

<p>å¯ä»¥çœ‹åˆ°å·²ç»æ˜¯ HTTPS å•¦ï¼Œæ²¡æœ‰ä»»ä½•è­¦å‘Šã€‚</p>

</div>


    </main>

    
  </body>
</html>
